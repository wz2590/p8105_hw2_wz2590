---
title: "p8105_hw2_wz2590"
output: github_document
author: Weiheng Zhang
---



### Problem 1
```{r  message = FALSE}
library(tidyverse)
```


Read and clean the Mr. Trash Wheel sheet.

```{r}
trashWheels_df = readxl::read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", range = "A2:N408") %>%
  janitor::clean_names() %>% # make the naming uniform
  drop_na(dumpster) %>% # drop all the rows that is not dumpster specific
  mutate (
    sports_balls = round(sports_balls) %>% 
      as.integer()
  )
trashWheels_df
```

Read and clean precipitation data for 2018 and 2019.

```{r}
precipitation_18_raw = readxl::read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
                                      sheet = "2018 Precipitation",
                                      skip = 1)
precipitation_18_raw

precipitation_18_tidy = precipitation_18_raw %>% 
  drop_na(Month, Total) %>% 
  mutate (year = 2018) %>%
  subset (select = c(3,1,2))

precipitation_18_tidy
```

```{r}
precipitation_19_raw = readxl::read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
                                      sheet = "2019 Precipitation",
                                      skip = 1)
precipitation_19_raw

precipitation_19_tidy = precipitation_19_raw %>% 
  drop_na(Month, Total) %>% 
  mutate (year = 2019,) %>%
  subset (select = c(3,1,2))

precipitation_19_tidy
```

Combine the 2018 and 2019 data, and convert month to a character variable
```{r}
precipitation_comb = 
  bind_rows(precipitation_18_tidy, precipitation_19_tidy) %>%
  mutate (Month = month.name[Month])

precipitation_comb
```



```{r}
sportsBalls_2017 = trashWheels_df %>% 
  filter(year == 2017) %>% 
  select(sports_balls)

med_sportsBalls_2017 = median(sportsBalls_2017[[1]])

med_sportsBalls_2017
```






Mr. Trash Wheel is â€œa water-wheel vessel that removes trash from the Inner Harbor in Baltimore, Maryland. This dataset contains these information that is specific to each dumpster: month, year, date, weight_tons, volume_cubic_yards, plastic_bottles, polystyrene, cigarette_butts, glass_bottles, grocery_bags, chip_bags, sports_balls, homes_powered.

The precipitation_comb data frame contains the precipitation(in) on each month from Jan 2018 to Jun 2019. 

The total precipitation in 2018 is `r sum(precipitation_18_tidy$Total)` inches. 
The median number of sports balls in a dumpster in 2017 is 8.




### Problem 2


First, clean the data in pols-month.csv
```{r}
pols_month_df_raw = read_csv("./data/fivethirtyeight_datasets/pols-month.csv")

#pols_month_df_raw
 
pol_month_df = pols_month_df_raw %>%       
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = T) %>% 
  mutate(month = month.name[month], 
         president = ifelse(prez_gop >= 1 & prez_dem == 0, "gop", "dem")) %>% 
  select(-c(day, prez_gop, prez_dem))
  
pol_month_df
```


Second, clean the data in snp.csv using a similar process to the above.

```{r}
snp_df_raw = read_csv("./data/fivethirtyeight_datasets/pols-month.csv")

#snp_df_raw
 
snp_df = snp_df_raw %>%       
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = T) %>% 
  mutate(month = month.name[month], 
         president = ifelse(prez_gop >= 1 & prez_dem == 0, "gop", "dem")) %>% 
  select(-c(day, prez_gop, prez_dem)) %>% 
  arrange(year, month)
  
snp_df
```






